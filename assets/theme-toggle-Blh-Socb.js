import{i as _,a}from"./vendor-4yCzdkXl.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();const I="https://dummyjson.com/",d={CATEGORIES:"products/category-list",PRODUCTS:"products",PRODUCT_BY_ID:"products/",SEARCH:"products/search",PRODUCTS_BY_CATEGORY:"products/category/"},u={CART:"cart",WISHLIST:"wishlist",THEME:"theme"},o={categoryList:document.querySelector(".categories"),categoryBtn:document.querySelector(".categories__btn"),categoryItem:document.querySelector(".categories__item"),productList:document.querySelector(".products"),notFoundModal:document.querySelector("div.not-found"),searchForm:document.querySelector(".search-form"),searchInput:document.querySelector(".search-form__input"),clearSearchBtn:document.querySelector(".search-form__btn-clear"),loader:document.querySelector(".loader"),productsList:document.querySelector(".products"),get notFound(){return document.querySelector(".not-found")},pagination:document.querySelector(".pagination"),modal:document.querySelector(".modal"),modalProduct:document.querySelector(".modal-product"),modalCloseBtn:document.querySelector(".modal__close-btn"),modalActions:document.querySelector(".modal-product__actions"),productList:document.querySelector(".products"),themeToggleBtn:document.querySelector(".theme-toggle-btn"),wishlistCount:document.querySelector("[data-wishlist-count]"),cartCount:document.querySelector("[data-cart-count]"),cartTotalItems:document.querySelector("[data-count]"),cartTotalPrice:document.querySelector("[data-price]"),cartBuyBtn:document.querySelector(".cart-summary__btn"),loadMoreBtn:document.querySelector(".load-more-btn")};function R(){const t=document.querySelector(".categories__btn");t&&t.classList.add("categories__btn--active")}function E(){document.querySelector(".categories__btn--active").classList.remove("categories__btn--active")}function f(t){_.error({title:"Error",message:t,position:"topRight",timeout:1e3})}const b=(t,e)=>{try{const r=JSON.stringify(e);localStorage.setItem(t,r),document.dispatchEvent(new CustomEvent("storageUpdated",{detail:{key:t,value:e}}))}catch(r){console.error("Set state error: ",r.message)}},m=t=>{try{const e=localStorage.getItem(t);return e===null?void 0:JSON.parse(e)}catch(e){console.error("Get state error: ",e.message)}};function S(t,e){return(m(t)||[]).includes(e)}function O(t,e){const r=m(t)||[];r.push(e),b(t,r),C()}function F(t,e){const r=m(t)||[],n=r.indexOf(e);n!==-1&&r.splice(n,1),b(t,r),C()}const C=()=>{const t=m(u.CART)||[],e=m(u.WISHLIST)||[];o.cartCount&&(o.cartCount.textContent=t.length),o.wishlistCount&&(o.wishlistCount.textContent=e.length)};function p(){o.loadMoreBtn.classList.remove("is-hidden")}function y(){o.loadMoreBtn.classList.add("is-hidden")}a.defaults.baseURL=I;async function H(){const{data:t}=await a(`${d.CATEGORIES}`);return t}async function D(t){const{data:e}=await a(`${d.PRODUCTS_BY_CATEGORY}${t}?limit=12`);return e}async function U(t){const{data:e}=await a(`${d.SEARCH}?limit=12&q=${t}`);return e}async function N(t,e){const r=(e-1)*12,{data:n}=await a(`${d.SEARCH}?limit=12&q=${t}&skip=${r}`);return n}async function Y(){const{data:t}=await a(`${d.PRODUCTS}?limit=12`);return t.products}async function T(t){const e=(t-1)*12,r=`${d.PRODUCTS}?limit=12&skip=${e}`;return(await a(r)).data.products}async function j(t,e){const r=(e-1)*12,n=`${d.PRODUCTS_BY_CATEGORY}${t}?limit=12&skip=${r}`;return(await a(n)).data}async function W(t){const{data:e}=await a(`${d.PRODUCT_BY_ID}${t}`);return e}function G(t){const e=t.map(r=>`<li class="categories__item">
        <button class="categories__btn" type="button">${r}</button>
      </li>`).join("");o.categoryList.innerHTML=e}function z(t){const{id:e,thumbnail:r,title:n,price:s,description:c,shippingInformation:i="Not specified",returnPolicy:x="Not specified"}=t,M=`
    <img class="modal-product__img" src="${r}" alt="${n}" />
    <div class="modal-product__content">
      <h2 class="modal-product__title">${n}</h2>
      <div class="modal-product__details">
        <p class="modal-product__price">Price: $${s}</p>
        <p class="modal-product__description">${c}</p>
        <p class="modal-product__shipping-information"><b>Shipping:</b> ${i}</p>
        <p class="modal-product__return-policy"><b>Return Policy:</b> ${x}</p>
      </div>
    </div> `,q=S(u.CART,String(e)),k=S(u.WISHLIST,String(e)),A=`
    <button class="modal-product__btn modal-product__btn--cart" data-id="${e}">${q?"Remove from Cart":"Add to Cart"}</button>
    <button class="modal-product__btn modal-product__btn--wishlist" data-id="${e}">${k?"Remove from Wishlist":"Add to Wishlist"}</button>
  `;o.modalProduct.innerHTML=M,o.modalActions.innerHTML=A}function w(t){return`
    <li class="products__item" data-id="${t.id}">
      <img class="products__image" src="${t.thumbnail}" alt="${t.title}" />
      <p class="products__title">${t.title}</p>
      <p class="products__brand"><span class="products__brand--bold">Brand:</span> ${t.brand}</p>
      <p class="products__category">Category: ${t.category}</p>
      <p class="products__price">Price: $${t.price}</p>
    </li>
  `}function h(t){const e=t.map(w).join("");o.productsList.innerHTML=e}function K(t){const e=t.map(w).join("");o.productList.insertAdjacentHTML("beforeend",e)}function it(){o.productList&&(o.productList.innerHTML="")}function B(t){t.code==="Escape"&&L()}function $(t){t.currentTarget===t.target&&L()}function J(){o.modal&&(o.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",document.addEventListener("keydown",B),o.modal.addEventListener("click",$))}function L(){o.modal&&(o.modal.classList.remove("modal--is-open"),document.body.style.overflow="auto",document.removeEventListener("keydown",B),o.modal.removeEventListener("click",$))}o.modalCloseBtn&&o.modalCloseBtn.addEventListener("click",L);let l=1;async function dt(){try{const t=await H();G(["All",...t]),R()}catch(t){console.log(t)}}async function V(t){try{const e=await D(t);h(e.products),e.products.length===0&&t!=="All"&&o.notFoundModal.classList.add("not-found--visible"),e.total<=12?y():p()}catch(e){console.log(e)}}async function lt(t){t.preventDefault();const e=o.searchInput.value.trim();if(!e){f("Please enter a search term");return}l=1,o.loader&&o.loader.classList.add("visible");try{const r=await U(e);if(p(),o.loader&&o.loader.classList.remove("visible"),o.productsList.innerHTML="",r.length===0){o.notFound&&o.notFound.classList.add("not-found--visible");return}o.notFound&&o.notFound.classList.remove("not-found--visible"),h(r.products),r.total<=12&&y(),o.clearSearchBtn&&o.clearSearchBtn.classList.add("visible")}catch(r){o.loader&&o.loader.classList.remove("visible"),f("Search failed. Please try again."),console.error(r)}}async function ut(){o.searchInput.value="",l=1,o.clearSearchBtn&&o.clearSearchBtn.classList.remove("visible"),o.notFound&&o.notFound.classList.remove("not-found--visible"),o.loader&&o.loader.classList.add("visible");try{const t=await Y();if(p(),o.loader&&o.loader.classList.remove("visible"),o.productsList.innerHTML="",t.length===0){o.notFound&&o.notFound.classList.add("not-found--visible");return}h(t),t.total<=12&&y()}catch(t){o.loader&&o.loader.classList.remove("visible"),f("Failed to load products"),console.error(t)}}function mt(t){const e=t.target.closest(".modal-product__btn");if(!e)return;const{id:r}=e.dataset,n=e.classList.contains("modal-product__btn--cart"),s=n?u.CART:u.WISHLIST,c=n?"cart":"wishlist",i=n?"Cart":"Wishlist";S(s,r)?(F(s,r),e.textContent=`Add to ${i}`,_.info({title:"Removed",message:`Product removed from your ${c}.`,position:"topRight",timeout:1e3})):(O(s,r),e.textContent=`Remove from ${i}`,_.success({title:"Success",message:`Product added to your ${c}!`,position:"topRight",timeout:1e3}))}async function pt(t){const e=t.target.closest(".products__item");if(!e)return;const{id:r}=e.dataset;try{const n=await W(r);z(n),J()}catch(n){console.log(n)}}async function Q(){l=1;try{const t=await T(l);h(t),p()}catch(t){console.log(t)}}function ft(t){let e=t.target.textContent;t.target.classList.contains("categories__btn")&&(E(),t.target.classList.add("categories__btn--active"),l=1,e==="All"&&(o.notFoundModal.classList.remove("not-found--visible"),Q()),V(e))}async function gt(){l++;const t=o.searchInput.value.trim(),e=document.querySelector(".categories__btn--active"),r=(e==null?void 0:e.textContent)||"All";try{const n=await X(t,r,l),s=n.products||n;K(s),Z(n,s)}catch(n){console.error("Error loading more products:",n),f("Failed to load more products")}}async function X(t,e,r){return t?await N(t,r):e==="All"?await T(r):await j(e,r)}function Z(t,e){t.skip!==void 0&&t.total!==void 0&&(t.skip+e.length>=t.total?y():p())}const P=document.body,g=o.themeToggleBtn,tt=`
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
`,et=`
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
`;function v(t){P.setAttribute("data-theme",t),localStorage.setItem("theme",t),ot(t)}function ot(t){g&&(g.innerHTML=t==="dark"?tt:et)}function rt(){const e=P.getAttribute("data-theme")==="dark"?"light":"dark";v(e)}function nt(){const t=localStorage.getItem("theme"),e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;v(t||(e?"dark":"light"))}g&&g.addEventListener("click",rt);nt();export{u as S,mt as a,W as b,it as c,h as d,ut as e,Q as f,dt as g,lt as h,ft as i,gt as j,m as l,pt as o,o as r,b as s,C as u};
//# sourceMappingURL=theme-toggle-Blh-Socb.js.map
