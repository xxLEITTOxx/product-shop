import{i as S,a}from"./vendor-4yCzdkXl.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();const E="https://dummyjson.com/",l={CATEGORIES:"products/category-list",PRODUCTS:"products",PRODUCT_BY_ID:"products/",SEARCH:"products/search",PRODUCTS_BY_CATEGORY:"products/category/"},u={CART:"cart",WISHLIST:"wishlist",THEME:"theme"},o={categoryList:document.querySelector(".categories"),categoryBtn:document.querySelector(".categories__btn"),categoryItem:document.querySelector(".categories__item"),productList:document.querySelector(".products"),notFoundModal:document.querySelector("div.not-found"),searchForm:document.querySelector(".search-form"),searchInput:document.querySelector(".search-form__input"),clearSearchBtn:document.querySelector(".search-form__btn-clear"),loader:document.querySelector(".loader"),productsList:document.querySelector(".products"),get notFound(){return document.querySelector(".not-found")},pagination:document.querySelector(".pagination"),scrollUpBtn:document.querySelector(".scroll-up"),modal:document.querySelector(".modal"),modalProduct:document.querySelector(".modal-product"),modalCloseBtn:document.querySelector(".modal__close-btn"),modalActions:document.querySelector(".modal-product__actions"),productList:document.querySelector(".products"),themeToggleBtn:document.querySelector(".theme-toggle-btn"),wishlistCount:document.querySelector("[data-wishlist-count]"),cartCount:document.querySelector("[data-cart-count]"),cartTotalItems:document.querySelector("[data-count]"),cartTotalPrice:document.querySelector("[data-price]"),cartBuyBtn:document.querySelector(".cart-summary__btn"),loadMoreBtn:document.querySelector(".load-more-btn")};function O(){const t=document.querySelector(".categories__btn");t&&t.classList.add("categories__btn--active")}function F(){document.querySelector(".categories__btn--active").classList.remove("categories__btn--active")}function f(t){S.error({title:"Error",message:t,position:"topRight",timeout:1e3})}const C=(t,e)=>{try{const r=JSON.stringify(e);localStorage.setItem(t,r),document.dispatchEvent(new CustomEvent("storageUpdated",{detail:{key:t,value:e}}))}catch(r){console.error("Set state error: ",r.message)}},m=t=>{try{const e=localStorage.getItem(t);return e===null?void 0:JSON.parse(e)}catch(e){console.error("Get state error: ",e.message)}};function v(t,e){return(m(t)||[]).includes(e)}function H(t,e){const r=m(t)||[];r.push(e),C(t,r),T()}function U(t,e){const r=m(t)||[],n=r.indexOf(e);n!==-1&&r.splice(n,1),C(t,r),T()}const T=()=>{const t=m(u.CART)||[],e=m(u.WISHLIST)||[];o.cartCount&&(o.cartCount.textContent=t.length),o.wishlistCount&&(o.wishlistCount.textContent=e.length)};function p(){o.loadMoreBtn.classList.remove("is-hidden")}function y(){o.loadMoreBtn.classList.add("is-hidden")}function dt(){o.scrollUpBtn&&(window.scrollY>300?o.scrollUpBtn.classList.add("show"):o.scrollUpBtn.classList.remove("show"))}function ut(){window.scrollTo({top:0,behavior:"smooth"})}function b(){o.loader.classList.remove("visuallyhidden")}function g(){o.loader.classList.add("visuallyhidden")}a.defaults.baseURL=E;async function D(){const{data:t}=await a(`${l.CATEGORIES}`);return t}async function N(t){await b();const{data:e}=await a(`${l.PRODUCTS_BY_CATEGORY}${t}?limit=12`);return e}async function Y(t){const{data:e}=await a(`${l.SEARCH}?limit=12&q=${t}`);return e}async function j(t,e){const r=(e-1)*12,{data:n}=await a(`${l.SEARCH}?limit=12&q=${t}&skip=${r}`);return n}async function W(){const{data:t}=await a(`${l.PRODUCTS}?limit=12`);return t.products}async function B(t){await b();const e=(t-1)*12,r=`${l.PRODUCTS}?limit=12&skip=${e}`;return(await a(r)).data.products}async function G(t,e){await b();const r=(e-1)*12,n=`${l.PRODUCTS_BY_CATEGORY}${t}?limit=12&skip=${r}`;return(await a(n)).data}async function z(t){const{data:e}=await a(`${l.PRODUCT_BY_ID}${t}`);return e}function K(t){const e=t.map(r=>`<li class="categories__item">
        <button class="categories__btn" type="button">${r}</button>
      </li>`).join("");o.categoryList.innerHTML=e}function J(t){const{id:e,thumbnail:r,title:n,price:s,description:c,shippingInformation:i="Not specified",returnPolicy:M="Not specified"}=t,k=`
    <img class="modal-product__img" src="${r}" alt="${n}" />
    <div class="modal-product__content">
      <h2 class="modal-product__title">${n}</h2>
      <div class="modal-product__details">
        <p class="modal-product__price">Price: $${s}</p>
        <p class="modal-product__description">${c}</p>
        <p class="modal-product__shipping-information"><b>Shipping:</b> ${i}</p>
        <p class="modal-product__return-policy"><b>Return Policy:</b> ${M}</p>
      </div>
    </div> `,I=v(u.CART,String(e)),A=v(u.WISHLIST,String(e)),R=`
    <button class="modal-product__btn modal-product__btn--cart" data-id="${e}">${I?"Remove from Cart":"Add to Cart"}</button>
    <button class="modal-product__btn modal-product__btn--wishlist" data-id="${e}">${A?"Remove from Wishlist":"Add to Wishlist"}</button>
  `;o.modalProduct.innerHTML=k,o.modalActions.innerHTML=R}function $(t){return`
    <li class="products__item" data-id="${t.id}">
      <img class="products__image" src="${t.thumbnail}" alt="${t.title}" />
      <p class="products__title">${t.title}</p>
      <p class="products__brand"><span class="products__brand--bold">Brand:</span> ${t.brand}</p>
      <p class="products__category">Category: ${t.category}</p>
      <p class="products__price">Price: $${t.price}</p>
    </li>
  `}function _(t){const e=t.map($).join("");o.productsList.innerHTML=e}function V(t){const e=t.map($).join("");o.productList.insertAdjacentHTML("beforeend",e)}function mt(){o.productList&&(o.productList.innerHTML="")}function P(t){t.code==="Escape"&&w()}function q(t){t.currentTarget===t.target&&w()}function Q(){o.modal&&(o.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",document.addEventListener("keydown",P),o.modal.addEventListener("click",q))}function w(){o.modal&&(o.modal.classList.remove("modal--is-open"),document.body.style.overflow="auto",document.removeEventListener("keydown",P),o.modal.removeEventListener("click",q))}o.modalCloseBtn&&o.modalCloseBtn.addEventListener("click",w);let d=1;async function pt(){try{const t=await D();K(["All",...t]),O()}catch(t){console.log(t)}}async function X(t){try{const e=await N(t);_(e.products),e.products.length===0&&t!=="All"&&o.notFoundModal.classList.add("not-found--visible"),e.total<=12?y():p()}catch(e){console.log(e)}finally{g()}}async function ft(t){t.preventDefault();const e=o.searchInput.value.trim();if(!e){f("Please enter a search term");return}d=1,o.loader&&o.loader.classList.add("visible");try{const r=await Y(e);if(g(),p(),o.loader&&o.loader.classList.remove("visible"),o.productsList.innerHTML="",r.length===0){o.notFound&&o.notFound.classList.add("not-found--visible");return}o.notFound&&o.notFound.classList.remove("not-found--visible"),_(r.products),r.total<=12&&y(),o.clearSearchBtn&&o.clearSearchBtn.classList.add("visible")}catch(r){o.loader&&o.loader.classList.remove("visible"),f("Search failed. Please try again."),console.error(r)}}async function ht(){o.searchInput.value="",d=1,o.clearSearchBtn&&o.clearSearchBtn.classList.remove("visible"),o.notFound&&o.notFound.classList.remove("not-found--visible"),o.loader&&o.loader.classList.add("visible");try{const t=await W();if(p(),o.loader&&o.loader.classList.remove("visible"),o.productsList.innerHTML="",t.length===0){o.notFound&&o.notFound.classList.add("not-found--visible");return}_(t),t.total<=12&&y()}catch(t){o.loader&&o.loader.classList.remove("visible"),f("Failed to load products"),console.error(t)}}function yt(t){const e=t.target.closest(".modal-product__btn");if(!e)return;const{id:r}=e.dataset,n=e.classList.contains("modal-product__btn--cart"),s=n?u.CART:u.WISHLIST,c=n?"cart":"wishlist",i=n?"Cart":"Wishlist";v(s,r)?(U(s,r),e.textContent=`Add to ${i}`,S.info({title:"Removed",message:`Product removed from your ${c}.`,position:"topRight",timeout:1e3})):(H(s,r),e.textContent=`Remove from ${i}`,S.success({title:"Success",message:`Product added to your ${c}!`,position:"topRight",timeout:1e3}))}async function gt(t){const e=t.target.closest(".products__item");if(!e)return;const{id:r}=e.dataset;try{const n=await z(r);J(n),Q()}catch(n){console.log(n)}}async function Z(){d=1;try{const t=await B(d);_(t),p(),g()}catch(t){console.log(t)}}function _t(t){let e=t.target.textContent;t.target.classList.contains("categories__btn")&&(F(),t.target.classList.add("categories__btn--active"),d=1,o.searchInput.value="",e==="All"&&(o.notFoundModal.classList.remove("not-found--visible"),Z()),X(e))}async function St(){d++;const t=o.searchInput.value.trim(),e=document.querySelector(".categories__btn--active"),r=(e==null?void 0:e.textContent)||"All";try{const n=await tt(t,r,d),s=n.products||n;V(s),et(n,s)}catch(n){console.error("Error loading more products:",n),f("Failed to load more products")}finally{g()}}async function tt(t,e,r){return t?await j(t,r):e==="All"?await B(r):await G(e,r)}function et(t,e){t.skip!==void 0&&t.total!==void 0&&(t.skip+e.length>=t.total?y():p())}const x=document.body,h=o.themeToggleBtn,ot=`
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
`,rt=`
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
`;function L(t){x.setAttribute("data-theme",t),localStorage.setItem("theme",t),nt(t)}function nt(t){h&&(h.innerHTML=t==="dark"?ot:rt)}function st(){const e=x.getAttribute("data-theme")==="dark"?"light":"dark";L(e)}function ct(){const t=localStorage.getItem("theme"),e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;L(t||(e?"dark":"light"))}h&&h.addEventListener("click",st);ct();export{u as S,yt as a,z as b,mt as c,_ as d,ft as e,ht as f,pt as g,dt as h,Z as i,_t as j,St as k,m as l,C as m,gt as o,o as r,ut as s,T as u};
//# sourceMappingURL=theme-toggle-C76pZI4f.js.map
