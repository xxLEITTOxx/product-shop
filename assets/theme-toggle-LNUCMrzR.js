import{i as f,a as i}from"./vendor-4yCzdkXl.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(n){if(n.ep)return;n.ep=!0;const c=r(n);fetch(n.href,c)}})();const x="https://dummyjson.com/",l={CATEGORIES:"products/category-list",PRODUCTS:"products",PRODUCT_BY_ID:"products/",SEARCH:"products/search",PRODUCTS_BY_CATEGORY:"products/category/"},d={CART:"cart",WISHLIST:"wishlist",THEME:"theme"},o={categoryList:document.querySelector(".categories"),categoryBtn:document.querySelector(".categories__btn"),categoryItem:document.querySelector(".categories__item"),productList:document.querySelector(".products"),notFoundModal:document.querySelector("div.not-found"),searchForm:document.querySelector(".search-form"),searchInput:document.querySelector(".search-form__input"),clearSearchBtn:document.querySelector(".search-form__btn-clear"),loader:document.querySelector(".loader"),productsList:document.querySelector(".products"),get notFound(){return document.querySelector(".not-found")},pagination:document.querySelector(".pagination"),modal:document.querySelector(".modal"),modalProduct:document.querySelector(".modal-product"),modalCloseBtn:document.querySelector(".modal__close-btn"),modalActions:document.querySelector(".modal-product__actions"),productList:document.querySelector(".products"),themeToggleBtn:document.querySelector(".theme-toggle-btn"),wishlistCount:document.querySelector("[data-wishlist-count]"),cartCount:document.querySelector("[data-cart-count]"),cartTotalItems:document.querySelector("[data-count]"),cartTotalPrice:document.querySelector("[data-price]"),cartBuyBtn:document.querySelector(".cart-summary__btn")};function q(){const t=document.querySelector(".categories__btn");t&&t.classList.add("categories__btn--active")}function I(){document.querySelector(".categories__btn--active").classList.remove("categories__btn--active")}function g(t){f.error({title:"Error",message:t,position:"topRight",timeout:1e3})}const S=(t,e)=>{try{const r=JSON.stringify(e);localStorage.setItem(t,r),document.dispatchEvent(new CustomEvent("storageUpdated",{detail:{key:t,value:e}}))}catch(r){console.error("Set state error: ",r.message)}},u=t=>{try{const e=localStorage.getItem(t);return e===null?void 0:JSON.parse(e)}catch(e){console.error("Get state error: ",e.message)}};function y(t,e){return(u(t)||[]).includes(e)}function R(t,e){const r=u(t)||[];r.push(e),S(t,r),v()}function E(t,e){const r=u(t)||[],s=r.indexOf(e);s!==-1&&r.splice(s,1),S(t,r),v()}const v=()=>{const t=u(d.CART)||[],e=u(d.WISHLIST)||[];o.cartCount&&(o.cartCount.textContent=t.length),o.wishlistCount&&(o.wishlistCount.textContent=e.length)};i.defaults.baseURL=x;async function A(){const{data:t}=await i(`${l.CATEGORIES}`);return t}async function O(t){const{data:e}=await i(`${l.PRODUCTS_BY_CATEGORY}${t}?limit=12`);return e}async function k(t){const{data:e}=await i(`${l.SEARCH}?q=${t}`);return e.products}async function M(){const{data:t}=await i(`${l.PRODUCTS}`);return t.products}async function F(t){const e=(t-1)*12,r=`${l.PRODUCTS}?limit=12&skip=${e}`;return(await i(r)).data.products}async function H(t){const{data:e}=await i(`${l.PRODUCT_BY_ID}${t}`);return e}function D(t){const e=t.map(r=>`<li class="categories__item">
        <button class="categories__btn" type="button">${r}</button>
      </li>`).join("");o.categoryList.innerHTML=e}function U(t){const{id:e,thumbnail:r,title:s,price:n,description:c,shippingInformation:a="Not specified",returnPolicy:T="Not specified"}=t,w=`
    <img class="modal-product__img" src="${r}" alt="${s}" />
    <div class="modal-product__content">
      <h2 class="modal-product__title">${s}</h2>
      <div class="modal-product__details">
        <p class="modal-product__price">Price: $${n}</p>
        <p class="modal-product__description">${c}</p>
        <p class="modal-product__shipping-information"><b>Shipping:</b> ${a}</p>
        <p class="modal-product__return-policy"><b>Return Policy:</b> ${T}</p>
      </div>
    </div> `,B=y(d.CART,String(e)),P=y(d.WISHLIST,String(e)),$=`
    <button class="modal-product__btn modal-product__btn--cart" data-id="${e}">${B?"Remove from Cart":"Add to Cart"}</button>
    <button class="modal-product__btn modal-product__btn--wishlist" data-id="${e}">${P?"Remove from Wishlist":"Add to Wishlist"}</button>
  `;o.modalProduct.innerHTML=w,o.modalActions.innerHTML=$}function N(t){return`
    <li class="products__item" data-id="${t.id}">
      <img class="products__image" src="${t.thumbnail}" alt="${t.title}" />
      <p class="products__title">${t.title}</p>
      <p class="products__brand"><span class="products__brand--bold">Brand:</span> ${t.brand}</p>
      <p class="products__category">Category: ${t.category}</p>
      <p class="products__price">Price: $${t.price}</p>
    </li>
  `}function p(t){const e=t.map(N).join("");o.productsList.innerHTML=e}function et(){o.productList&&(o.productList.innerHTML="")}function b(t){t.code==="Escape"&&_()}function L(t){t.currentTarget===t.target&&_()}function W(){o.modal&&(o.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",document.addEventListener("keydown",b),o.modal.addEventListener("click",L))}function _(){o.modal&&(o.modal.classList.remove("modal--is-open"),document.body.style.overflow="auto",document.removeEventListener("keydown",b),o.modal.removeEventListener("click",L))}o.modalCloseBtn&&o.modalCloseBtn.addEventListener("click",_);let Y=1;async function ot(){try{const t=await A();D(["All",...t]),q()}catch(t){console.log(t)}}async function z(t){try{const e=await O(t);p(e.products),e.products.length===0&&t!=="All"&&o.notFoundModal.classList.add("not-found--visible")}catch(e){console.log(e)}}async function rt(t){t.preventDefault();const e=o.searchInput.value.trim();if(!e){g("Please enter a search term");return}o.loader&&o.loader.classList.add("visible");try{const r=await k(e);if(o.loader&&o.loader.classList.remove("visible"),o.productsList.innerHTML="",r.length===0){o.notFound&&o.notFound.classList.add("not-found--visible");return}o.notFound&&o.notFound.classList.remove("not-found--visible"),p(r),o.clearSearchBtn&&o.clearSearchBtn.classList.add("visible")}catch(r){o.loader&&o.loader.classList.remove("visible"),g("Search failed. Please try again."),console.error(r)}}async function nt(){o.searchInput.value="",o.clearSearchBtn&&o.clearSearchBtn.classList.remove("visible"),o.notFound&&o.notFound.classList.remove("not-found--visible"),o.loader&&o.loader.classList.add("visible");try{const t=await M();if(o.loader&&o.loader.classList.remove("visible"),o.productsList.innerHTML="",t.length===0){o.notFound&&o.notFound.classList.add("not-found--visible");return}p(t)}catch(t){o.loader&&o.loader.classList.remove("visible"),g("Failed to load products"),console.error(t)}}function st(t){const e=t.target.closest(".modal-product__btn");if(!e)return;const{id:r}=e.dataset,s=e.classList.contains("modal-product__btn--cart"),n=s?d.CART:d.WISHLIST,c=s?"cart":"wishlist",a=s?"Cart":"Wishlist";y(n,r)?(E(n,r),e.textContent=`Add to ${a}`,f.info({title:"Removed",message:`Product removed from your ${c}.`,position:"topRight",timeout:1e3})):(R(n,r),e.textContent=`Remove from ${a}`,f.success({title:"Success",message:`Product added to your ${c}!`,position:"topRight",timeout:1e3}))}async function ct(t){const e=t.target.closest(".products__item");if(!e)return;const{id:r}=e.dataset;try{const s=await H(r);U(s),W()}catch(s){console.log(s)}}async function G(){try{const t=await F(Y);p(t)}catch(t){console.log(t)}}function at(t){const e=t.target.textContent;t.target.classList.contains("categories__btn")&&(I(),t.target.classList.add("categories__btn--active"),e==="All"&&(o.notFoundModal.classList.remove("not-found--visible"),G()),z(e))}const C=document.body,m=o.themeToggleBtn,j=`
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
`,K=`
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
`;function h(t){C.setAttribute("data-theme",t),localStorage.setItem("theme",t),J(t)}function J(t){m&&(m.innerHTML=t==="dark"?j:K)}function Q(){const e=C.getAttribute("data-theme")==="dark"?"light":"dark";h(e)}function V(){const t=localStorage.getItem("theme"),e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;h(t||(e?"dark":"light"))}m&&m.addEventListener("click",Q);V();export{d as S,st as a,H as b,et as c,p as d,nt as e,G as f,ot as g,rt as h,at as i,u as l,ct as o,o as r,S as s,v as u};
//# sourceMappingURL=theme-toggle-LNUCMrzR.js.map
