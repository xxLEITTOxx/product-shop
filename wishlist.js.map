{"version":3,"file":"wishlist.js","sources":["../src/wishlist.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { STORAGE_KEYS } from './js/constants.js';\nimport { refs } from './js/refs.js';\nimport {\n  loadFromStorage,\n  updateCounters,\n  handleScroll,\n  scrollToTop,\n} from './js/helpers.js';\nimport { onModalActionsClick, onProductClick } from './js/handlers.js';\nimport { requestProductById } from './js/products-api.js';\nimport { renderProducts, clearProducts } from './js/render-function.js';\nimport './js/theme-toggle';\n\n/**\n * Завантажує та відображає товари зі списку бажань.\n */\nasync function loadWishlistProducts() {\n  const wishlistIds = loadFromStorage(STORAGE_KEYS.WISHLIST) || [];\n  clearProducts();\n\n  if (wishlistIds.length === 0) {\n    if (refs.productList) {\n      refs.productList.innerHTML =\n        '<li class=\"wishlist-empty-message\">Your wishlist is empty.</li>';\n    }\n    return;\n  }\n\n  try {\n    const productPromises = wishlistIds.map(id => requestProductById(id));\n    const products = await Promise.all(productPromises);\n    renderProducts(products);\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load wishlist products.',\n    });\n  }\n}\n\n/**\n * Обробник кастомної події оновлення localStorage.\n * @param {CustomEvent} event\n */\nfunction handleStorageUpdate(event) {\n  if (event.detail.key === STORAGE_KEYS.WISHLIST) {\n    loadWishlistProducts();\n  }\n}\n\n/**\n * Ініціалізація сторінки списку бажань.\n */\nfunction initializeWishlistPage() {\n  updateCounters();\n  loadWishlistProducts();\n\n  if (refs.productList) {\n    refs.productList.addEventListener('click', onProductClick);\n  }\n  if (refs.modalActions) {\n    refs.modalActions.addEventListener('click', onModalActionsClick);\n  }\n  document.addEventListener('storageUpdated', handleStorageUpdate);\n  if (refs.scrollUpBtn) {\n    window.addEventListener('scroll', handleScroll);\n    refs.scrollUpBtn.addEventListener('click', scrollToTop);\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', initializeWishlistPage);\n"],"names":["loadWishlistProducts","wishlistIds","loadFromStorage","STORAGE_KEYS","clearProducts","refs","productPromises","id","requestProductById","products","renderProducts","iziToast","handleStorageUpdate","event","initializeWishlistPage","updateCounters","onProductClick","onModalActionsClick","handleScroll","scrollToTop"],"mappings":"4KAkBA,eAAeA,GAAuB,CACpC,MAAMC,EAAcC,EAAgBC,EAAa,QAAQ,GAAK,CAAA,EAG9D,GAFAC,IAEIH,EAAY,SAAW,EAAG,CACxBI,EAAK,cACPA,EAAK,YAAY,UACf,mEAEJ,MACD,CAED,GAAI,CACF,MAAMC,EAAkBL,EAAY,IAAIM,GAAMC,EAAmBD,CAAE,CAAC,EAC9DE,EAAW,MAAM,QAAQ,IAAIH,CAAe,EAClDI,EAAeD,CAAQ,CACxB,MAAe,CACdE,EAAS,MAAM,CACb,MAAO,QACP,QAAS,mCACf,CAAK,CACF,CACH,CAMA,SAASC,EAAoBC,EAAO,CAC9BA,EAAM,OAAO,MAAQV,EAAa,UACpCH,GAEJ,CAKA,SAASc,GAAyB,CAChCC,IACAf,IAEIK,EAAK,aACPA,EAAK,YAAY,iBAAiB,QAASW,CAAc,EAEvDX,EAAK,cACPA,EAAK,aAAa,iBAAiB,QAASY,CAAmB,EAEjE,SAAS,iBAAiB,iBAAkBL,CAAmB,EAC3DP,EAAK,cACP,OAAO,iBAAiB,SAAUa,CAAY,EAC9Cb,EAAK,YAAY,iBAAiB,QAASc,CAAW,EAE1D,CAEA,SAAS,iBAAiB,mBAAoBL,CAAsB"}